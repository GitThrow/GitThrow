# 使い方

## インストール

1. [Jenkins](http://jenkins.orekyuu.net/view/Workbench2/job/GitThrow/)から最新版の成果物を落とす
1. `java -jar (jarファイル名).jar`で起動する。
1. [http://localhost:8080/](http://localhost:8080/)にアクセスするとログイン可能になる

その他サーバー起動時の設定については以下のリンクを確認してください。  
[プロファイルの設定](./Profile.md)

## 初期設定
インストール直後はadminユーザーが設定されていますが、パスワードを変更しないと誰でも管理者アカウントに入れるのでパスワードを変更します。

1. adminユーザーでログインする  
ユーザーID: admin  
パスワード: password
1. 設定 > パスワード変更フォームからパスワードを変更する

## ユーザーを追加する
新しいユーザーを作る場合は管理者がユーザーを作る必要があります。

1. 管理者設定 > ユーザー管理
1. メンバー追加ボタンからユーザーID、ユーザー名、仮のパスワードを設定
1. 設定したユーザーIDと仮のパスワードを新しいメンバーに通知してパスワードを変更するように伝えてください

## プロジェクトを作成する
GitThrowではGitリポジトリ・CIを纏めたものをプロジェクトと呼んでいます。  
新しくプロジェクトは以下の手順で作成できます。
1. プロジェクト > 新規プロジェクト
1. プロジェクトIDとプロジェクト名を入力して作成  
これらの項目は後から変更することは出来ません。

## プロジェクトの管理者設定
プロジェクトを作成したユーザーのみプロジェクトの管理者設定を変更するとが出来ます。  
管理者設定はプロジェクトのサイドメニューにある管理者設定から開くことが出来ます。

- メンバー設定  
右上の検索バーからユーザーを検索し、プロジェクトに入れることが出来ます。
また、メンバー一覧の削除ボタンからメンバーを脱退させることが出来ます。

- Bot設定  
CIの結果などを通知するBotの設定です。  
アバターとユーザー名の変更を行えます。

- プロジェクトテーマ  
プロジェクトページの背景画像を設定することが出来ます。

## Gitの機能を使う
プロジェクトのダッシュボードのページにはgitリポジトリのURLが表示されています。  
新しくコードをpushする場合は`git remote add origin [url]`でRemoteを設定し、pushしてください。
すでにpushされている場合は`git clone [url]`でcloneできます。  
また、git管理下のディレクトリの直下にREADME.mdを配置することでダッシュボードにmasterブランチのREADME.mdの内容を表示できます。

## プルリクエストを使う
プルリクエストを作るにはサイドメニューからプルリクエストを開いて、新規プルリクエストをクリックします。  
新規プルリクエストで必要な項目を入力し作成します。  
マージするにはプルリクエストのdiffが見られるページでマージボタンを押します。  
CIの設定がされていれば自動的にテストが実行され、Botがテスト結果をコメントしてくれます。

## CIの設定を行う
CIの設定をすることでマージ時にテストや成果物のビルドを行ってくれます。  
CIの設定をするにはダッシュボードを開いてBuild Config Generatorに必要な項目を入力してDownloadボタンから設定ファイルをダウンロードします。  
次に落としたファイルをgit管理下のディレクトリの直下に配置してpushすればGitThrowはこのファイルの設定を使用してテストやビルドを行います。  
- ビルドコマンド  
ビルド時に実行するコマンドを設定します。  
複数のコマンドを指定する場合は改行で区切ります。  
例) gradlew build
- 成果物のパス  
ビルドコマンドを実行したときに生成されたファイルを指定します。  ここで指定された文字列にマッチするファイルを保存してダウンロードできるようにします。  
例) target/*.jar
- テスト設定  
テストを実行するときのコマンドです。  
例) gradlew test

## 成果物のダウンロード
左のメニューの成果物から生成された成果物の一覧を見ることが出来ます。  
いらなくなったファイルは削除ボタンから消すことが出来ます。
